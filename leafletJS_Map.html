<html>
    <head>
	<! Load leafletJS stuff -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js"></script>

	<! Load MapQuest stuff -->
        <script src="https://www.mapquestapi.com/sdk/leaflet/v2.s/mq-map.js?key=SOoctRD4IfsY1ozL5vsosetXnKq8oaCA"></script>
        <script src="https://www.mapquestapi.com/sdk/leaflet/v2.s/mq-geocoding.js?key=SOoctRD4IfsY1ozL5vsosetXnKq8oaCA"></script>

	<! Start of the javascript part of our page -->
        <script type="text/javascript">
            window.onload = function() {

                var popup = L.popup(),
                    geocode,
                    map;
		//var marker = L.marker();

		// Make a map centered on Eugene, then add a marker and popup on click event
                map = L.map('map', {layers: MQ.mapLayer(), center: [ 44.05125071, -123.086754 ],
                        zoom: 14 }).on('click', function(e) {
			// Set location of popup
                        popup.setLatLng(e.latlng)
                            //.openOn(this);
			// Make a marker that is clickable
			L.marker([ ], { clickable : true })
				// Set its location
				.setLatLng(e.latlng)
				// Add it to the map
				.addTo(map)
				// And bind our popup to it
				.bindPopup(popup)

                        geocode.reverse(e.latlng);
                    });

                geocode = MQ.geocode().on('success', function(e) {
                    popup.setContent(geocode.describeLocation(e.result.best));
                });
            }
        </script>
	<! End of the javascript part -->
    </head>

    <body style='border:0; margin: 0'>
	<! Add the map to the body of our page with the size we want -->
        <div id='map' style='width:1100px; height:830px;'></div>
    </body>
</html>
